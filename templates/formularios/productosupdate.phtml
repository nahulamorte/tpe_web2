<?php require 'templates/layout/header.phtml'; ?>

<?php if ($this->user): ?>
    <div class="container d-flex justify-content-center">
        <div class="col-lg-4">
            <h2 class="text-center mb-4 p-3">Actualizar producto</h2> <!-- Agregado padding al título -->
            <form action="<?= BASE_URL . 'productos/actualizar/' . $producto->id_producto ?>" method="POST" class="p-4 shadow rounded bg-light">

                <div class="mb-3">
                    <label for="id_categoria" class="form-label">Categoría</label> <!-- Agregada etiqueta -->
                    <select name="id_categoria" id="id_categoria" class="form-select">
                        <option value="" disabled selected>Selecciona una categoría</option>
                        <?php foreach($categorias as $categoria) : ?>
                            <option value="<?= $categoria->id_categoria ?>" <?= $categoria->id_categoria == $producto->id_categoria ? 'selected' : '' ?>>
                                <?= $categoria->nombre ?>
                            </option>
                        <?php endforeach; ?>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" value="<?= $producto->nombre ?>" required>
                </div>

                <div class="mb-3">
                    <label for="descripcion" class="form-label">Descripción</label>
                    <textarea class="form-control" id="descripcion" name="descripcion" rows="3" required><?= $producto->descripcion ?></textarea>
                </div>

                <div class="mb-3">
                    <label for="precio" class="form-label">Precio</label>
                    <input type="number" class="form-control" id="precio" name="precio" step="0.01" value="<?= $producto->precio ?>" required>
                </div>

                <div class="mb-3">
                    <label for="peso_neto" class="form-label">Peso Neto (kg)</label>
                    <input type="number" class="form-control" id="peso_neto" name="peso_neto" step="0.01" value="<?= $producto->peso_neto ?>" required>
                </div>

                <div class="mb-3">
                    <label for="fecha_empaquetado" class="form-label">Fecha de Empaquetado</label>
                    <input type="date" class="form-control" id="fecha_empaquetado" name="fecha_empaquetado" value="<?= $producto->fecha_empaquetado ?>" required>
                </div>

                <div class="mb-3">
                    <label for="fecha_vencimiento" class="form-label">Fecha de Vencimiento</label>
                    <input type="date" class="form-control" id="fecha_vencimiento" name="fecha_vencimiento" value="<?= $producto->fecha_vencimiento ?>" required>
                </div>

                <div class="mb-3">
                    <label for="stock" class="form-label">Stock</label>
                    <input type="number" class="form-control" id="stock" name="stock" value="<?= $producto->stock ?>" required>
                </div>

                <div class="mb-3">
                    <label for="id_proveedor" class="form-label">Proveedor</label> <!-- Agregada etiqueta -->
                    <select name="id_proveedor" id="id_proveedor" class="form-select">
                        <option value="" disabled selected>Selecciona un proveedor</option>
                        <?php foreach($proveedores as $proveedor) : ?>
                            <option value="<?= $proveedor->id_proveedor ?>" <?= $proveedor->id_proveedor == $producto->id_proveedor ? 'selected' : '' ?>>
                                <?= $proveedor->nombre ?>
                            </option>
                        <?php endforeach; ?>
                    </select>
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg">Actualizar</button>
                </div>  
            </form>
        </div>
    </div>
<?php endif; ?>

<?php require 'templates/layout/footer.phtml'; ?>
